<html>

<head>
<meta name=Generator content="Microsoft Office HTML Filter 2.0">
<meta http-equiv=Content-Type content="text/html; charset=iso-8859-1">
<meta name=Originator content="Microsoft Word 9">
<title>... in Java by Richard G Baldwin</title>
<style>
<!--
 
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{
	margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman";}
h2
	{margin-right:0in;
	margin-left:0in;
	font-size:18.0pt;
	font-family:"Times New Roman";
	font-weight:bold;}
h3
	{margin-right:0in;
	margin-left:0in;
	font-size:13.5pt;
	font-family:"Times New Roman";
	font-weight:bold;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:blue;
	text-decoration:underline;}
p
	{margin-right:0in;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Times New Roman";}
pre
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Courier New";}
ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>
<meta name=author content="richard g. baldwin">
</head>

<body lang=EN-US link=blue vlink=blue>
<!--start-->

<div class=Section1>

<h3 align=center style='text-align:center'><i>Richard G Baldwin (512) 223-4758,
<a href="mailto:baldwin@austin.cc.tx.us">baldwin@austin.cc.tx.us</a>, <a
href="http://www2.austin.cc.tx.us/baldwin/">http://www2.austin.cc.tx.us/baldwin/</a></i></h3>

<h2 align=center style='text-align:center'><!--title-->Network Programming &#8211;
Stubs, Skeletons, and Remote Objects<!--endtitle--></h2>

<p>Java Programming, Lesson # 568, Revised 01/30/00. </p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal><a
     href="#_Preface">Preface</a></li>
 <li class=MsoNormal><a
     href="#_Introduction">Introduction</a></li>
 <li class=MsoNormal><a
     href="#_Sample_Program">Sample Program</a></li>
 <ul style='margin-top:0in' type=circle>
  <li class=MsoNormal><a
      href="#_Code_Fragments">Code Fragments</a></li>
  <li class=MsoNormal><a
      href="#_Program_Listing">Program Listing</a></li>
 </ul>
</ul>


<div class=MsoNormal align=center style='text-align:center'>

<hr size=3 width="100%" align=center>

</div>


<h2 align=center style='text-align:center'><a name=preface></a><a
name="_Preface"></a><span style='color:red'>Preface</span></h2>

<p>Students in Prof. Baldwin's <b><u>Advanced Java Programming</u></b> classes
at ACC are responsible for knowing and understanding all of the material in
this lesson. </p>

<h2 align=center style='text-align:center'><a name=introduction></a><a
name="_Introduction"></a><span style='color:red'>Introduction</span></h2>

<p>The lessons in this series have taught you a great deal about the use of
sockets in network programming.&nbsp; Several other lessons in this tutorial
also deal with network programming, but at a higher level.&nbsp; For example,
one series of lessons deals with Java RMI while another series of lessons deals
with CORBA.</p>

<p>Both RMI and CORBA make it possible for you to write programs by which a
program running on one machine can invoke methods on an object that exists on
another machine somewhere on a network.&nbsp; Both approaches make use of
concepts known as stubs and skeletons, but at an abstract level.</p>

<p>The purpose of this lesson is to introduce you to stubs, skeletons, and
remote objects at a very fundamental level.&nbsp; Once you understand this
material, you should have a much better idea of what is going on when you use
the RMI and CORBA class libraries to implement distributed object programs.</p>

<h2 align=center style='text-align:center'><a name="server_program"></a><a
name="_Sample_Program"></a><span style='color:red'>Sample Program</span></h2>

<p>This is not a polished distributed-object program.&nbsp; Rather, it is a
crude implementation of the stub/skeleton concept designed solely to introduce
you to that concept.</p>

<p>The program doesn&#8217;t know how to terminate the socket connection properly and
throws an exception when it terminates.&nbsp; You might want to see if you can
figure out how to prevent that.&nbsp; It would also be a good exercise for you
to clean this program up and make it more robust.</p>

<p>The program consists of four different classes and one interface that are
stored in the following files:</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal>RemoteObj01.java</li>
 <li class=MsoNormal>RemoteObjClient01.java</li>
 <li class=MsoNormal>RemoteObjServer01.java</li>
 <li class=MsoNormal>RemoteObjSkel01.java</li>
 <li class=MsoNormal>RemoteObjStub01.java</li>
</ul>

<p>Here are the operating instructions for compiling and executing this
program.</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal>Compile
     all files</li>
 <li class=MsoNormal>Start
     RemoteObjSkel01, which is actually a network server.&nbsp; This server
     will start and block waiting for a connection request from a client.</li>
 <li class=MsoNormal>Start
     RemoteObjClient01.&nbsp; </li>
</ul>

<p>The output that appears on the screen where you start RemoteObjClient01
should be:</p>

<p><b>Desired color is: red</b><br>
<b>Desired size is: 28</b></p>

<p>The server will then terminate by throwing an exception.&nbsp; As mentioned
above, the program does not know how to shut the server down properly.</p>

<h3 align=center style='text-align:center'><a name="code_fragments"></a><a
name="_Code_Fragments"></a><span style='color:red'>Code Fragments</span></h3>

<p><b><span style='color:red'>The interface file</span></b></p>

<p class=MsoNormal>I often tell my students that if you don&#8217;t understand the
Java interface, you don&#8217;t understand Java.&nbsp; This sample program provides a
particularly interesting and important use of the Java interface, so I will begin
at that point.</p>

<p class=MsoNormal>&nbsp;</p>

<table border=1 cellspacing=3 cellpadding=0 bgcolor="#ffff80" style='background:#FFFF80;'>
 <tr>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>/*File
  RemoteObj01.java</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>**********************************************************/</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>public
  interface RemoteObj01 {</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  public int <b>getSize</b>() throws Throwable;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  public String <b>getColor</b>() throws Throwable;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>}</span></p>
  </td>
 </tr>
</table>

<p>As you can see, this is a very simple interface that declares only two
methods.&nbsp; The interesting thing about this interface is that two classes
in this program implement it, but the two implementations are significantly
different.</p>

<p><b><span style='color:red'>The remote object class</span></b></p>

<p>The objective of this simple program is to make it possible for a method
running in an object on one machine to invoke methods on an object that resides
on a different machine.&nbsp; (Although the program is written to run in two
different processes on the same machine for convenience, it would be very easy
to modify it to run on two different machines.)</p>

<p>I will refer to the object whose methods are being invoked as the <i>remote
object</i>.&nbsp; In CORBA jargon, this object would be known as a <i>servant
object</i>.</p>

<p>The following fragment begins the definition of the class from which the
remote object is instantiated.&nbsp; Note that this class implements the
interface shown above, which is also implemented by the stub class on the
client.</p>

<p>This is a very simple class.&nbsp; When a new object of the class is
instantiated, two incoming parameters are used to set the state of the
object.&nbsp; Otherwise, there is no code in the object to change its state.</p>

<table border=1 cellspacing=3 cellpadding=0 bgcolor="#ffff80" style='background:#FFFF80;'>
 <tr>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>/*File
  RemoteObjServer01.java</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>**********************************************************/</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>public
  class RemoteObjServer01 <b>implements</b> RemoteObj01 {</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  int size;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  String color;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  //Constructor</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  public <b>RemoteObjServer01</b>(String color, int size){</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  this.size = size;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  this.color = color;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  }//end constructor</span></p>
  </td>
 </tr>
</table>

<p><b><span style='color:red'>Methods of the remote object</span></b></p>

<p>The next fragment shows the two methods of the remote object that can be
invoked remotely by the client.&nbsp; They are very simple also, simply
returning the state of the object that was established when the object was
instantiated.&nbsp; I purposely designed this as a simple class to reduce the
complexity of the program as much as possible.</p>

<table border=1 cellspacing=3 cellpadding=0 bgcolor="#ffff80" style='background:#FFFF80;'>
 <tr>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  public int <b>getSize</b>(){</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  return size;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  }//end getSize()</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  //-----------------------------------------------------//</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  </span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  public String <b>getColor</b>(){</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  return color;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  }//end getColor()</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>}//end
  class RemoteObjServer01</span></p>
  </td>
 </tr>
</table>

<p><b><span style='color:red'>The skeleton class</span></b></p>

<p>The primary purpose of this program is to illustrate the use of stub and
skeleton objects to make it possible for a method of an object on one machine to
invoke methods of an object on a different machine.&nbsp; The beginning of the
skeleton class is shown in the next fragment.</p>

<p>Before getting into the details of the code, it will be useful to provide
some information about the overall concept.&nbsp; In effect there are four
objects in existence while the program is running.&nbsp; Two of those objects
reside on one machine and the other two reside on a different machine.
&nbsp;For want of a better terminology, I will refer to the two machines as the
client machine and the server machine.&nbsp; An object on the client machine
invokes methods of an object that resides on the server machine.</p>

<p>The two objects on the client machine are:</p>

<p class=MsoNormal><span style='font-family:Symbol'>·</span><span
style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>The client
object.</p>

<p class=MsoNormal><span style='font-family:Symbol'>·</span><span
style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>A stub
object.</p>

<p>The two objects on the server machine are:</p>

<p class=MsoNormal><span style='font-family:Symbol'>·</span><span
style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>A skeleton
object.</p>

<p class=MsoNormal><span style='font-family:Symbol'>·</span><span
style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>The remote
object discussed earlier.</p>

<p>The stub object represents the remote object on the client machine.&nbsp; In
fact, insofar as the client object knows, the remote object is physically
located on the client machine.&nbsp; That is an important aspect of
distributed-object systems.&nbsp; The remote objects on which the methods are
invoked appear to be on the same machine as the client object that is invoking
those methods.</p>

<p>When the client object thinks that it invokes a method on the remote object,
it actually invokes a method having the same signature on the stub
object.&nbsp; (The class from which the stub object is instantiated must
implement the same interface as the class from which the remote object is
instantiated.)&nbsp; The stub object then sends a message to the skeleton
object on the server asking it to invoke the method having the same signature
on the remote object.</p>

<p>The skeleton invokes that method on the remote object and captures the value
returned by the method.&nbsp; The skeleton object then sends that value back to
the stub, which returns it to the client object.&nbsp; Thus, the cycle is
complete.&nbsp; The client object has invoked a method and has received a
return value.</p>

<p><b><span style='color:red'>The skeleton object</span></b></p>

<p>The following fragment shows the beginning of the class from which the
skeleton object is instantiated.&nbsp; Note that this class extends <b>Thread</b>.</p>

<p>The constructor for the skeleton object receives a reference to a remote
object and saves it in an instance variable named <b>myServer</b>.</p>

<table border=1 cellspacing=3 cellpadding=0 bgcolor="#ffff80" style='background:#FFFF80;'>
 <tr>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>/*File
  RemoteObjSkel01.java</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>**********************************************************/</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>import
  java.io.*;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>import
  java.net.*;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>public
  class RemoteObjSkel01 extends Thread{</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  RemoteObjServer01 myServer;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  </span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  //Constructor</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  public <b>RemoteObjSkel01</b>(RemoteObjServer01 server){</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  //Save a reference to the remote object</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  this.myServer = server;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  }//end constructor</span></p>
  </td>
 </tr>
</table>

<p><b><span style='color:red'>The run method</span></b></p>

<p>Since this class extends <b>Thread</b>, it must have a <b>run()</b>
method.&nbsp; Recall that the <b>run()</b> method is where the action is for
threads.</p>

<p>The following fragment shows the beginning of the <b>run()</b> method.</p>

<p>The first thing that the skeleton object does in the <b>run() </b>method is
to instantiate a <b>ServerSocket</b> object and block, waiting for a client to
request a connection.&nbsp; (The <b>ServerSocket</b> program presented earlier
in this series is much more sophisticated than this program insofar as behaving
like a server is concerned.)</p>

<table border=1 cellspacing=3 cellpadding=0 bgcolor="#ffff80" style='background:#FFFF80;'>
 <tr>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  public void <b>run</b>(){</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  try{</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  ServerSocket serverSocket = <b>new ServerSocket</b>(2000);</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  Socket socket = serverSocket.<b>accept()</b>;</span></p>
  </td>
 </tr>
</table>

<p><b><span style='color:red'>Connection request received</span></b></p>

<p>When a connection request is received, the <b>accept()</b> method returns a <b>Socket</b>
object that is connected to the client.&nbsp; The <b>run()</b> method goes into
a loop</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal>Reading
     requests from the client, </li>
 <li class=MsoNormal>Parsing
     those requests for the purpose of invoking methods on the remote object, </li>
 <li class=MsoNormal>Capturing
     the value returned from the methods on the remote object, and</li>
 <li class=MsoNormal>Sending
     that value back to the client.</li>
</ul>

<p><b><span style='color:red'>Open input and output streams</span></b></p>

<p>Before the skeleton object can read requests from the client, it must open
an input stream on the socket.&nbsp; The next fragment shows the opening of
input and output streams capable of reading and writing serialized objects.</p>

<table border=1 cellspacing=3 cellpadding=0 bgcolor="#ffff80" style='background:#FFFF80;'>
 <tr>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  &nbsp;&nbsp;while(socket != null){</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  ObjectInputStream inStream</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  = <b>new ObjectInputStream</b>(socket.getInputStream());</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  ObjectOutputStream outStream</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  = <b>new ObjectOutputStream</b>(socket.getOutputStream());</span></p>
  </td>
 </tr>
</table>

<p><b><span style='color:red'>Read and parse incoming request</span></b></p>

<p>The next fragment shows the skeleton object first reading, and then parsing the
incoming request.&nbsp; </p>

<p>The incoming request is received as a serialized object of the <b>String</b>
class.&nbsp; Only two possibilities are allowed:</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal>getSize</li>
 <li class=MsoNormal>getColor</li>
</ul>

<p>This is not a robust program and no provision is made to deal with incoming
data errors.</p>

<p>Depending on the contents of the incoming string object, the skeleton
invokes either the <b>getSize()</b> method or the <b>getColor()</b> method on
the remote object.&nbsp; It captures the return value from the method,
serializes that value, and sends it back to the client. </p>

<table border=1 cellspacing=3 cellpadding=0 bgcolor="#ffff80" style='background:#FFFF80;'>
 <tr>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  String method = (String)inStream.readObject();</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  if(method.equals(&quot;<b>getSize</b>&quot;)){</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  int size = myServer.<b>getSize</b>();</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  outStream.<b>writeInt</b>(size);</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  outStream.flush();</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  }else if(method.equals(&quot;<b>getColor</b>&quot;)){</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  String color = myServer.<b>getColor</b>();</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  outStream.<b>writeObject</b>(color);</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  outStream.flush();</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  }//end else</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  }//end while loop</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  }catch(Throwable t) {</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  t.printStackTrace();System.exit(0); <br>
  &nbsp;&nbsp;&nbsp; }//end catch</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  }//end run()</span></p>
  </td>
 </tr>
</table>

<p><b><span style='color:red'>Run the server application</span></b></p>

<p>This server runs as an application requiring a <b>main()</b> method.&nbsp;
The <b>main()</b> method is very straightforward.&nbsp; First the method
instantiates a new remote object initializing it with the color red and size
28.</p>

<p>Then the <b>main() </b>method instantiates a skeleton <b>Thread</b> object,
passing a reference to the remote object as a parameter to the
constructor.&nbsp; </p>

<p>Then it invokes the <b>start()</b> method on the skeleton object to start
the skeleton thread running.&nbsp; At that point, the skeleton object becomes
capable of responding to connection requests from a client, and invoking
methods on the remote object on behalf of the client.</p>

<table border=1 cellspacing=3 cellpadding=0 bgcolor="#ffff80" style='background:#FFFF80;'>
 <tr>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  public static void main(String args [] ){</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  RemoteObjServer01 remoteObj = </span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <b>new RemoteObjServer01</b>(&quot;red&quot;, 28);</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  RemoteObjSkel01 skel = <b>new RemoteObjSkel01</b>(remoteObj);</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  skel.<b>start()</b>;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  }//end main()</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>}//end
  class RemoteObjSkel01</span></p>
  </td>
 </tr>
</table>

<p><b><span style='color:red'>The stub object</span></b></p>

<p>The stub object resides on the client and represents the remote object to the
client.&nbsp; The class from which the stub object is instantiated and the
class from which the remote object is instantiated both implement the same
interface.&nbsp; Thus, both the stub object and the remote object implement the
same method signatures, but they implement those signatures in significantly
different ways.</p>

<p>The class of the remote object implements the methods in a manner that is
intended to achieve the desired result.&nbsp; The class of the stub object
implements the methods in such a way as to make it possible for the stub to
accept method calls from the client and pass those method calls along to the
skeleton object, which in turn, passes them to the remote object as shown
above.</p>

<p>The next fragment shows the beginning of the class from which the stub object
is instantiated, emphasizing the fact that the class implements the <b>RemoteObj01</b>
interface.</p>

<p>The fragment also declares some reference variables that will be used later.</p>

<table border=1 cellspacing=3 cellpadding=0 bgcolor="#ffff80" style='background:#FFFF80;'>
 <tr>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>/*File
  RemoteObjStub01.java</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>**********************************************************/</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>import
  java.io.*;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>import
  java.net.Socket;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>public
  class RemoteObjStub01 <b>implements RemoteObj01</b> {</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  Socket socket;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  ObjectOutputStream outStream;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  ObjectInputStream inStream;</span></p>
  </td>
 </tr>
</table>

<p><b><span style='color:red'>Connect to the skeleton server</span></b></p>

<p>The next fragment shows the constructor which requests a socket connection
to the skeleton server discussed above.&nbsp; As shown here, the request is for
a connection to <b>localhost</b>.&nbsp; As you will recall, this nomenclature
is used to connect to a server running in a different process on the same
machine.&nbsp; If you want to run the server and the client on different
machines, replace <b>localhost</b> with the IP address of the machine where the
server is running.</p>

<table border=1 cellspacing=3 cellpadding=0 bgcolor="#ffff80" style='background:#FFFF80;'>
 <tr>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  public <b>RemoteObjStub01</b>()throws Throwable{//constructor</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  ///Instantiate a network connection to the skeleton.</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  socket = <b>new Socket</b>(&quot;localhost&quot;,2000);</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  }//end constructor</span></p>
  </td>
 </tr>
</table>

<p><b><span style='color:red'>Implement getSize() on the stub</span></b></p>

<p>The next fragment shows the implementation of the <b>getSize()</b> method on
the stub object.&nbsp; </p>

<p>The method begins by getting input and output streams on the socket that is
connected to the server.</p>

<p>Then it uses the output stream to send a message to the skeleton server
asking the skeleton to invoke the <b>getSize()</b> method on the remote
object.&nbsp; </p>

<p>Then it blocks on input while reading the return value from the <b>getSize()</b>
method on the remote object that is sent back in serialized form by the
skeleton.</p>

<p>When that value is received, it is returned to the client object that
invoked the <b>getSize()</b> method on the stub in the first place.</p>

<table border=1 cellspacing=3 cellpadding=0 bgcolor="#ffff80" style='background:#FFFF80;'>
 <tr>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  public int <b>getSize( )</b> throws Throwable{</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  outStream</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  = <b>new ObjectOutputStream</b>(socket.getOutputStream());</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  inStream = </span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <b>new ObjectInputStream</b>(socket.getInputStream());</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  outStream.writeObject(&quot;<b>getSize</b>&quot;);</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  outStream.flush();</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  <b>return</b> inStream.<b>readInt</b>();</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  }//end getSize()</span></p>
  </td>
 </tr>
</table>

<p><b><span style='color:red'>Implement getColor() on the stub</span></b></p>

<p>The next fragment shows the stub implementation of the <b>getColor()</b>
method. This is essentially the same as the <b>getSize()</b> method shown above
except that the return type is <b>String</b> instead of <b>int</b>.&nbsp; The
fragment is shown here for completeness.</p>

<table border=1 cellspacing=3 cellpadding=0 bgcolor="#ffff80" style='background:#FFFF80;'>
 <tr>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  public String <b>getColor</b>()throws Throwable{</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  outStream</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  = new ObjectOutputStream(socket.getOutputStream());</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  inStream = new</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  ObjectInputStream(socket.getInputStream());</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;
  outStream.writeObject(&quot;<b>getColor</b>&quot;);</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;
  outStream.flush();</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;
  <b>return</b> (String)inStream.<b>readObject</b>();</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  }//end getColor()</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>}//end
  class RemoteObjStub01</span></p>
  </td>
 </tr>
</table>

<p><b><span style='color:red'>The client object</span></b></p>

<p>The next fragment shows the class from which the client object is
instantiated. The highlighted line of code in the <b>main()</b> method shows
the thing that distinguishes the invocation of methods on a remote object from
the invocation of methods on a local object.&nbsp; </p>

<p>In the case of the remote object, the <b>main()</b> method is required to
instantiate a new object of the <i>stub class </i>that represents the remote
object.&nbsp; </p>

<p>If the object on which the methods are to be invoked were a local object,
then the <b>main()</b> method would instantiate an object of the class of that
object.&nbsp; </p>

<p>In both cases, the reference to the object can be stored in a reference
variable of the interface type implemented by both classes.</p>

<table border=1 cellspacing=3 cellpadding=0 bgcolor="#ffff80" style='background:#FFFF80;'>
 <tr>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>/*File
  RemoteObjClient01.java</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>**********************************************************/</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>public
  class <b>RemoteObjClient01</b> {</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  public static void <b>main</b>(String [] args){</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  try{</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  //Instantiate the stub that represents the remote</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  // object on the client.</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <b>RemoteObj01 remoteObj01 = new RemoteObjStub01();</b></span></p>
  </td>
 </tr>
</table>

<p><b><span style='color:red'>Invoke the methods</span></b></p>

<p>The next fragment shows the client invoking each of the available methods on
the stub object that represents the remote object.&nbsp; The values returned by
those method invocations are then displayed.</p>

<table border=1 cellspacing=3 cellpadding=0 bgcolor="#ffff80" style='background:#FFFF80;'>
 <tr>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  int <b>size</b> = remoteObj01.<b>getSize()</b>;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  String <b>color</b> = remoteObj01.<b>getColor()</b>;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  System.out.println(&quot;Desired color is: &quot; + <b>color</b>);</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  System.out.println(&quot;Desired size is: &quot; + <b>size</b>);</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  }catch(Throwable t) {t.printStackTrace();}</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  }//end main()</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>}//end
  class RemoteObjClient01</span></p>
  </td>
 </tr>
</table>

<p>Hopefully, an understanding of this material will help you to better
understand RMI and CORBA when you study those lessons.</p>

<h3 align=center style='text-align:center'><a name="program_listing"></a><a
name="_Program_Listing"></a><span style='color:red'>Program Listing</span></h3>

<p>This section contains listings of all of the programs discussed above.</p>

<table border=1 cellspacing=3 cellpadding=0 bgcolor="#ffff80" style='background:#FFFF80;'>
 <tr>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>/*File
  RemoteObjSkel01.java</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>This
  is one of a system of files that illustrates the use </span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>of
  stubs, skeletons, and remote objects in a system of</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>distributed
  objects.</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>Operating
  instructions:</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>1.
  Compile all files</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>2.
  Start RemoteObjSkel01.&nbsp; The server will start and just</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>sit
  there waiting for a connection.</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>3.
  Start RemoteObjClient01.&nbsp; The output should be:</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>Desired
  color is: red</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>Desired
  size is: 28</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>The
  server will then terminate by throwing an exception.</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>The
  program does not know how to shut the server down</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>properly.</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>Tested
  using JDK 1.2.2 under WinNT 4.0 Workstation</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>**********************************************************/</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>import
  java.io.*;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>import
  java.net.*;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>public
  class RemoteObjSkel01 extends Thread{</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  RemoteObjServer01 myServer;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  </span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  //Constructor</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  public RemoteObjSkel01(RemoteObjServer01 server){</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  //Save a reference to the remote object</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  this.myServer = server;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  }</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  public void run(){</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  try{</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  //Create a server socket and block waiting for a</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  // connection request</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  ServerSocket serverSocket = new ServerSocket(2000);</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  Socket socket = serverSocket.accept();</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  //If the returned socket is valid, process the</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  // connection.</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  &nbsp;&nbsp;while(socket != null){</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  //Get input and output streams on the socket</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  ObjectInputStream inStream</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  = new ObjectInputStream(socket.getInputStream());</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  ObjectOutputStream outStream</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  = new ObjectOutputStream(socket.getOutputStream());</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  //Read incoming request. Determine the type of </span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  // request and satisfy it.&nbsp; Only two types of </span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  // requests are allowed and there is no code to deal</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  // with bad requests.</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  String method = (String)inStream.readObject();</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  if(method.equals(&quot;getSize&quot;)){</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  //Invoke method on remote object</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  int size = myServer.getSize();</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  //Send results back to stub client</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  outStream.writeInt(size);</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  outStream.flush();</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  }else if(method.equals(&quot;getColor&quot;)){</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  String color = myServer.getColor();</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  outStream.writeObject(color);</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  outStream.flush();</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  }//end else</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  }//end while loop</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  }catch(Throwable t) {</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  t.printStackTrace();System.exit(0); }</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  }</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  //=====================================================//</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  public static void main(String args [] ){</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  //Instantiate the remote object</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  RemoteObjServer01 remoteObj = </span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  new RemoteObjServer01(&quot;red&quot;, 28);</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  //Instantiate the skeleton, linking it to the remote</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  // object and start the skeleton running</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  RemoteObjSkel01 skel = new RemoteObjSkel01(remoteObj);</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  skel.start();</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  }//end main()</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>}//end
  class RemoteObjSkel01</span></p>
  </td>
 </tr>
</table>

<p>.</p>

<table border=1 cellspacing=3 cellpadding=0 bgcolor="#ffff80" style='background:#FFFF80;'>
 <tr>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>/*File
  RemoteObjServer01.java</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>This
  is one of a system of files that illustrate the use </span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>of
  stubs, skeletons, and remote objects in a system of</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>distributed
  objects.</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>See
  RemoteObjSkel01.java for operating instructions.</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>Tested
  using JDK 1.2.2 under WinNT 4.0 Workstation</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>**********************************************************/</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>//This
  is the class from which the remote object is</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>//
  instantiated.&nbsp; Note that it implements the same</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>//
  interface that is implemented by the stub on the</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>//
  client.</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>public
  class RemoteObjServer01 implements RemoteObj01 {</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  int size;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  String color;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  //Constructor</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  public RemoteObjServer01(String color, int size){</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  this.size = size;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  this.color = color;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  }//end constructor</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  //-----------------------------------------------------//</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  </span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  public int getSize(){</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  return size;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  }//end getSize()</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  //-----------------------------------------------------//</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  </span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  public String getColor(){</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  return color;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  }//end getColor()</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>}//end
  class RemoteObjServer01</span></p>
  </td>
 </tr>
</table>

<p>.</p>

<table border=1 cellspacing=3 cellpadding=0 bgcolor="#ffff80" style='background:#FFFF80;'>
 <tr>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>/*File
  RemoteObjStub01.java</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>This
  is one of a system of files that illustrate the use </span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>of
  stubs, skeletons, and remote objects in a system of</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>distributed
  objects.</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>See
  RemoteObjSkel01.java for operating instructions.</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>Tested
  using JDK 1.2.2 under WinNT 4.0 Workstation</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>**********************************************************/</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>import
  java.io.*;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>import
  java.net.Socket;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>//Note
  that this stub class implements the same interface</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>//
  that is implemented by the class of the remote object.</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>public
  class RemoteObjStub01 implements RemoteObj01 {</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  Socket socket;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  ObjectOutputStream outStream;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  ObjectInputStream inStream;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  public RemoteObjStub01()throws Throwable{//constructor</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  ///Instantiate a network connection to the skeleton.</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  socket = new Socket(&quot;localhost&quot;,2000);</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  }//end constructor</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  //-----------------------------------------------------//</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  </span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  //A very important concept is illustrated here.&nbsp; The</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  // following two methods are implementations of the</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  // interface that this class implements.&nbsp; However, these</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  // methods serve as local proxies for the actual methods</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  // on the remote object that the client desires to </span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  // invoke.</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  public int getSize( ) throws Throwable{</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  //Get input and output streams on the socket</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  outStream</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  = new ObjectOutputStream(socket.getOutputStream());</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  inStream = new</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  ObjectInputStream(socket.getInputStream());</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  // Send a String to the skeleton indicating the method</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  // that is to be invoked on the remote object.&nbsp; Then</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  // get and return the value returned by the skeleton.</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  outStream.writeObject(&quot;getSize&quot;);</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  outStream.flush();</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  return inStream.readInt();</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  }//end getSize()</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  //-----------------------------------------------------//</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  </span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  public String getColor()throws Throwable{</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  //Get input and output streams on the socket</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  outStream</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  = new ObjectOutputStream(socket.getOutputStream());</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  inStream = new</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  ObjectInputStream(socket.getInputStream());</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  // Send a String to the skeleton indicating the method</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  // that is to be invoked on the remote object.&nbsp; Then</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  // get and return the value returned by the skeleton.</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;
  outStream.writeObject(&quot;getColor&quot;);</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;
  outStream.flush();</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;
  return (String)inStream.readObject();</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  }//end getColor()</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>}//end
  class RemoteObjStub01</span></p>
  </td>
 </tr>
</table>

<p>.</p>

<table border=1 cellspacing=3 cellpadding=0 bgcolor="#ffff80" style='background:#FFFF80;'>
 <tr>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>/*File
  RemoteObjClient01.java</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>This
  is one of a system of files that illustrate the use </span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>of
  stubs, skeletons, and remote objects in a system of</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>distributed
  objects.</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>See
  RemoteObjSkel01.java for operating instructions.</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>Tested
  using JDK 1.2.2 under WinNT 4.0 Workstation</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>**********************************************************/</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>public
  class RemoteObjClient01 {</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  public static void main(String [] args){</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  try{</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  //Instantiate the stub that represents the remote</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  // object on the client.</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  RemoteObj01 remoteObj01 = new RemoteObjStub01();</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  //Invoke two methods on the remote object via the</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  // stub and display the returned values.</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  int size = remoteObj01.getSize();</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  String color = remoteObj01.getColor();</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  System.out.println(&quot;Desired color is: &quot; + color);</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  System.out.println(&quot;Desired size is: &quot; + size);</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;
  }catch(Throwable t) {t.printStackTrace();}</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  }//end main()</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>}//end
  class RemoteObjClient01</span></p>
  </td>
 </tr>
</table>

<p>.</p>

<table border=1 cellspacing=3 cellpadding=0 bgcolor="#ffff80" style='background:#FFFF80;'>
 <tr>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>/*File
  RemoteObj01.java</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>This
  is one of a system of files that illustrates the use </span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>of
  stubs, skeletons, and remote objects in a system of</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>distributed
  objects.</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>See
  RemoteObjSkel01.java for operating instructions.</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>Tested
  using JDK 1.2.2 under WinNT 4.0 Workstation</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>**********************************************************/</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>public
  interface RemoteObj01 {</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  public int getSize() throws Throwable;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
  public String getColor() throws Throwable;</span></p>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>}</span></p>
  </td>
 </tr>
</table>

<p>-end-<!--end--></p>

</div>

</body>

</html>
